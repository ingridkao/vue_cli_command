"use strict";(self["webpackChunkvue_cli_command"]=self["webpackChunkvue_cli_command"]||[]).push([[797],{797:function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});var l=a(3396),i=a(7139);const r={key:0};function o(e,t,a,o,u,s){const c=(0,l.up)("Icon"),n=(0,l.up)("BreadcrumbItem"),d=(0,l.up)("Breadcrumb"),m=(0,l.up)("Checkbox"),p=(0,l.up)("CheckboxGroup"),h=(0,l.up)("InputNumber"),g=(0,l.up)("Space"),f=(0,l.up)("Spin"),w=(0,l.up)("Image"),C=(0,l.up)("CarouselItem"),y=(0,l.up)("Carousel"),_=(0,l.up)("Button"),k=(0,l.up)("Card"),V=(0,l.up)("Col"),W=(0,l.up)("Row");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(d,{class:"margin-1"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{to:"/"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{type:"md-home"})])),_:1}),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$route.meta.title),1)])),_:1})])),_:1}),(0,l.Wm)(g,{wrap:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{modelValue:u.activeCategories,"onUpdate:modelValue":t[0]||(t[0]=e=>u.activeCategories=e)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.categoriesData,(e=>((0,l.wg)(),(0,l.j4)(m,{key:e.id,label:e.name,border:""},null,8,["label"])))),128))])),_:1},8,["modelValue"]),(0,l.Wm)(h,{modelValue:u.min,"onUpdate:modelValue":t[1]||(t[1]=e=>u.min=e),size:"small",min:"0",formatter:e=>`$${e}`,parser:e=>e.replace("$","")},null,8,["modelValue","formatter","parser"]),(0,l.Uk)("- "),(0,l.Wm)(h,{modelValue:u.max,"onUpdate:modelValue":t[2]||(t[2]=e=>u.max=e),size:"small",min:"0",formatter:e=>`$${e}`,parser:e=>e.replace("$","")},null,8,["modelValue","formatter","parser"])])),_:1}),u.loading?((0,l.wg)(),(0,l.iD)("div",r," Loading... ")):((0,l.wg)(),(0,l.j4)(W,{key:1,gutter:4},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.displayData,(e=>((0,l.wg)(),(0,l.j4)(V,{xs:12,md:8,key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:e.carousel,"onUpdate:modelValue":t=>e.carousel=t},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.images,(e=>((0,l.wg)(),(0,l.j4)(C,{key:e},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{src:e,fit:"cover",lazy:"",width:"100%",height:"150px"},{placeholder:(0,l.w5)((()=>[(0,l.Wm)(f,{size:"large",fix:""})])),error:(0,l.w5)((()=>[(0,l.Wm)(c,{type:"ios-image-outline",size:"24",color:"#ccc"})])),_:2},1032,["src"])])),_:2},1024)))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,l._)("h3",null,(0,i.zw)(e.title),1),(0,l._)("div",null,[(0,l._)("h4",null,"$ "+(0,i.zw)(e.price),1),(0,l.Wm)(h,{modelValue:e.count,"onUpdate:modelValue":t=>e.count=t,"controls-outside":"",size:"small",min:"0"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(_,{type:"primary",icon:"md-cart",size:"small",shape:"circle",onClick:t=>s.updateCart(e)},null,8,["onClick"]),(0,l.Wm)(_,{icon:"md-return-right",size:"small",shape:"circle",onClick:t=>s.showProduct(e.id)},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1}))],64)}a(7658);var u={data(){return{min:0,max:1e4,query:{offset:0,limit:50},loading:!1,sourceData:[],categoriesData:[],activeCategories:[],cartList:[]}},computed:{cartArray(){return this.$store.state.cartList},displayData(){if(0===this.sourceData.length)return;console.log("computed");let e=this.sourceData;return this.activeCategories.length>0&&(e=e.filter(((e,t)=>{if(e.category)return this.activeCategories.includes(e.category.name)}))),e=e.filter(((e,t)=>e.price>this.min)),e=e.filter((e=>e.price<this.max)),e}},methods:{fetchCategories(){this.axios.get("https://api.escuelajs.co/api/v1/categories").then((e=>{Array.isArray(e.data)&&(this.categoriesData=e.data.splice(0,5))})).catch((e=>{console.log(e)}))},fetchProduct(){this.loading=!0,this.axios.get("https://api.escuelajs.co/api/v1/products",{params:this.query}).then((e=>{this.sourceData=e.data.map((e=>{const t=this.cartArray.find((t=>t&&t.id===e.id));return{...e,count:t?t.count:0}}))})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},showProduct(e){this.$router.push({path:`/news/${e}`})},updateCart(e){if(0===e.count)this.cartList=this.cartList.filter((t=>t.id!=e.id));else{let t=this.cartList.findIndex((t=>t.id==e.id));t=t>=0?t:0,this.cartList[t]={id:e.id,count:e.count}}this.$store.commit("setCarts",this.cartList)}},created(){this.fetchCategories(),this.fetchProduct()}},s=a(89);const c=(0,s.Z)(u,[["render",o]]);var n=c}}]);
//# sourceMappingURL=797.aab4243a.js.map